<!-- <!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Experiment - Index</title>
</head>
<body>
    <form id="indexForm" method="post" action="{{ url_for('index') }}"></form>
        <label for="attendance_number">出席番号を入力してください:</label>
        <input type="text" id="attendance_number" name="attendance_number"  required>
        <button type="submit">次に進む</button>
    </form>
</body>
<script>
    function submitForm() {
        // フォームのサブミットを手動で実行
        document.getElementById('indexForm').submit();
    }
</script>
</html> -->

<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Experiment - Index</title>
    <style>
        /* スタイルは必要に応じて追加 */
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div id="indexPage">
        <label for="attendance_number">出席番号を入力してください:</label>
        <input type="text" id="attendance_number" required>
        <button onclick="showInstructions()">次に進む</button>
    </div>
    <script>
        function showInstructions() {
        attendanceNumber = document.getElementById('attendance_number').value;
        document.getElementById('indexPage').classList.add('hidden');
        document.getElementById('instructionsPage').classList.remove('hidden');
        }
    </script>
    


    <div id="instructionsPage" class="hidden">
        <h1>実験の説明</h1>

        <div id="page1">
            <p>① こんにちは</p>
            <button onclick="nextPage(2)">次に進む</button>
        </div>
    
        <div id="page2" class="hidden">
            <p>② こんちは</p>
            <button onclick="nextPage(3)">次に進む</button>
        </div>
    
        <div id="page3" class="hidden">
            <p>③ こんにちわわ</p>
            <button onclick="nextPage(4)">次に進む</button>
        </div>
    
        <div id="page4" class="hidden">
            <p>④ こんちくび</p>
            <button onclick="startCountdown()">実験を開始する</button>
        </div>
    </div>

    <div id="countdownPage" class="hidden">
        <div id="countdown">3</div>
    </div>

    <div id="testPage" class="hidden">
        <p id="wordDisplay"></p>
        <div class="buttonContainer">
            <button onclick="submitAnswer('自分')">自分</button>
            <button onclick="submitAnswer('他人')">他人</button>
        </div>
    </div>

    <div id="resultPage" class="hidden">
        <p>出席番号: <span id="resultAttendanceNumber"></span></p>
        <p>時間: <span id="resultTimeTaken"></span>秒</p>
    </div>

    <script>
        let attendanceNumber;
        let currentWordIndex = 0;
        let startTime;
        let timeTakenCounter = 1;

        
        function nextPage(pageNumber) {
            document.getElementById('page' + pageNumber).classList.remove('hidden');
            document.getElementById('page' + (pageNumber - 1)).classList.add('hidden');
        }

        function startCountdown() {
            document.getElementById('instructionsPage').classList.add('hidden');
            document.getElementById('countdownPage').classList.remove('hidden');

            let count = 3;
            function countdown() {
                if (count > 0) {
                    document.getElementById('countdown').textContent = count;
                    count--;
                    setTimeout(countdown, 1000);
                } else {
                    document.getElementById('countdownPage').classList.add('hidden');
                    document.getElementById('testPage').classList.remove('hidden');
                    displayNextWord();
                }
            }
            countdown();
        }

        function displayNextWord() {
            document.getElementById('wordDisplay').innerText = wordList[currentWordIndex].word;
            startTime = new Date().getTime() / 1000
        }
